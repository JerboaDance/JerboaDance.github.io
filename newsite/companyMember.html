<html>
  <head>
    <link rel="stylesheet" href="/css/main.css"/>
    <script src="/scripts/common.js" type="module"></script>
    <script type="module">
      import { companyMembers } from "/scripts/database.js";
      const url = new URL(document.location);
      const companyMemberId = url.searchParams.get("companyMemberId");
      // check for valid company member
      if (companyMemberId && companyMembers[companyMemberId]) {
        const companyMember = companyMembers[companyMemberId];
        
        const name = document.getElementById("name");
        const role = document.getElementById("role");
        const bio = document.getElementById("bio");
        const headshot = document.getElementById("headshot");
        const photoCredit = document.getElementById("photoCredit");

        name.innerText = companyMember.name;
        bio.innerHTML = companyMember.bio
        if (companyMember.role) {
          role.innerText = companyMember.role;
        } else {
          role.hidden = true;
        }

        if (companyMember.headshot) {
          const filename = companyMember.headshot.filename ? companyMember.headshot.filename : "default.png";
          headshot.setAttribute("src", `/assets/companyMembers/${filename}`);
          headshot.setAttribute("alt", companyMember.name);
          
          if (companyMember.headshot.photographer) {
            const photographer = companyMember.headshot.photographer;
            let innerHTML = "Photo credit: "
            if (photographer.url) {
              innerHTML += `<a href="${photographer.url}">${photographer.name}</a>`
            } else {
              innerHTML += photographer.name;
            }

            photoCredit.innerHTML = innerHTML;
          }
        }

      } else {
        const main = document.getElementById("main");
        main.innerHTML = "Company member not found";
      }
    </script>
  </head>
  <body>
    <div class="bodyWrapper">
      <header id="header"></header>
      <main id="main">
        <div class="bio-image">
            <img id="headshot" />
            <p id="photoCredit">
        </div>
        <div class="bio-title">
            <h1 id="name"></h1>
            <h2 id="role"></h2>  
        </div>  
        <p id="bio" class="bio"></p>
      </main>
      <footer id="footer"></footer>
    </div>
  </body>
</html>